import{d as P,r as C,D as A,E as S,m as I,e as h,h as T,q as F,b as w,g as $,f as r,j as y,I as k,t as v,k as L,n as j,T as R,V as N,ab as D,y as u,u as x,c as _,ac as q,o as M,F as K,s as B,ad as J,a4 as V,C as U}from"./index-Ni514NBL.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"toast-header"},z={class:"toast-title"},H={class:"toast-content"},W=P({name:"ToastNotification",__name:"Toast",setup(l,{expose:t}){const e=C(!1),s=C(""),c=C("success"),g=C("carbon:checkmark"),f=C(3e3),a=(d,o="success",i=3e3)=>{s.value=d,c.value=o,g.value=o==="success"?"carbon:checkmark":"carbon:error",f.value=i,e.value=!0},n=()=>{e.value=!1},p=d=>{e.value&&(d.key==="Enter"||d.key==="Escape")&&(d.preventDefault(),d.stopPropagation(),n())};return A(e,d=>{d?document.addEventListener("keydown",p):document.removeEventListener("keydown",p)}),S(()=>{document.removeEventListener("keydown",p)}),t({show:a}),(d,o)=>(h(),I(N,{to:"body"},[T(R,{name:"modal"},{default:F(()=>[e.value?(h(),w("div",{key:0,class:"toast-overlay",onClick:n},[r("div",{class:j(["toast-modal",`toast--${c.value}`]),onClick:o[0]||(o[0]=L(()=>{},["stop"]))},[r("div",G,[T(y(k),{icon:g.value,class:"toast-icon"},null,8,["icon"]),r("span",z,v(c.value==="success"?"Success":"Error"),1)]),r("div",H,[r("span",null,v(s.value),1)]),r("div",{class:"toast-actions"},[r("button",{class:"toast-btn toast-btn--primary",onClick:n},"Confirm")])],2)])):$("",!0)]),_:1})]))}}),Q=O(W,[["__scopeId","data-v-02446227"]]);let E=null;const fe=()=>{if(!E){const l=D(Q),t=document.createElement("div");document.body.appendChild(t),E=l.mount(t)}return{success:(l,t)=>{E?.show(l,"success",t)},error:(l,t)=>{E?.show(l,"error",t)}}};class X{static async handleResponse(t){if(!t.ok)try{const e=await t.json(),s=e.error||e.message||`API request failed: ${t.status}`,c=new Error(s);throw e.errorCode&&(c.errorCode=e.errorCode),c}catch(e){throw e instanceof Error?e:new Error(`API request failed: ${t.status} ${t.statusText}`)}return t}static async createOrUpdatePlanTemplateWithTool(t){try{const e=await fetch("/api/plan-template/create-or-update-with-tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Failed to create or update plan template with tool:",e),e}}static async getPlanTemplateConfigVO(t){try{const e=await fetch(`/api/plan-template/${t}/config`);return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Failed to get plan template config VO:",e),e}}static async getAllPlanTemplateConfigVOs(){try{const t=await fetch("/api/plan-template/list-config");return await(await this.handleResponse(t)).json()}catch(t){throw u.error("Failed to get all plan template config VOs:",t),t}}static async deletePlanTemplate(t){try{const e=await fetch("/api/plan-template/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Failed to delete plan template:",e),e}}static async exportAllPlanTemplates(){try{const t=await fetch("/api/plan-template/export-all");return await(await this.handleResponse(t)).json()}catch(t){throw u.error("Failed to export all plan templates:",t),t}}static async importPlanTemplates(t){try{const e=await fetch("/api/plan-template/import-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Failed to import plan templates:",e),e}}static async generatePlanTemplateId(){try{const t=await fetch("/api/plan-template/generate-plan-template-id",{method:"GET",headers:{"Content-Type":"application/json"}});return(await(await this.handleResponse(t)).json()).planTemplateId}catch(t){throw u.error("Failed to generate plan template ID:",t),t}}static async getPlanVersions(t){try{const e=await fetch("/api/plan-template/versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Failed to get plan versions:",e),e}}static async getAllPlanTemplates(){try{const t=await fetch("/api/plan-template/list");return await(await this.handleResponse(t)).json()}catch(t){throw u.error("Failed to get plan template list:",t),t}}static async getParameterRequirements(t){try{const e=await fetch(`/api/plan-template/${t}/parameters`,{method:"GET",headers:{"Content-Type":"application/json"}});return await(await this.handleResponse(e)).json()}catch(e){throw u.error("Error getting parameter requirements:",e),e}}}const Y={class:"language-switcher"},Z=["title"],ee={class:"current-lang"},te={class:"dropdown-header"},ae={class:"language-options"},se=["disabled","onClick"],ne={class:"lang-code"},oe={class:"lang-name"},re=P({__name:"LanguageSwitcher",setup(l){const{locale:t}=x(),e=C(!1),s=_(()=>t.value),c=_(()=>q.opts),g=_(()=>{const o=c.value.find(i=>i.value===s.value);return o?o.title:"Unknown"}),f=()=>{e.value=!e.value},a=C(!1),n=async o=>{if(!(a.value||s.value===o))try{a.value=!0,await J(o),e.value=!1}catch(i){u.error("Failed to change language:",i),e.value=!1}finally{a.value=!1}},p=o=>{o.target.closest(".language-switcher")||(e.value=!1)},d=o=>{o.key==="Escape"&&(e.value=!1)};return M(()=>{document.addEventListener("click",p),document.addEventListener("keydown",d)}),S(()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",d)}),(o,i)=>(h(),w("div",Y,[r("button",{class:"language-btn",onClick:f,title:o.$t("language.switch")},[T(y(k),{icon:"carbon:translate",width:"18"}),r("span",ee,v(g.value),1),T(y(k),{icon:e.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,Z),e.value?(h(),w("div",{key:0,class:"language-dropdown",onClick:i[1]||(i[1]=L(()=>{},["stop"]))},[r("div",te,[r("span",null,v(o.$t("language.switch")),1),r("button",{class:"close-btn",onClick:i[0]||(i[0]=m=>e.value=!1)},[T(y(k),{icon:"carbon:close",width:"16"})])]),r("div",ae,[(h(!0),w(K,null,B(c.value,m=>(h(),w("button",{key:m.value,class:j(["language-option",{active:s.value===m.value,loading:a.value&&s.value!==m.value}]),disabled:a.value,onClick:b=>n(m.value)},[r("span",ne,v(m.value.toUpperCase()),1),r("span",oe,v(m.title),1),a.value&&s.value!==m.value?(h(),I(y(k),{key:0,icon:"carbon:circle-dash",width:"16",class:"loading-icon"})):s.value===m.value?(h(),I(y(k),{key:1,icon:"carbon:checkmark",width:"16",class:"check-icon"})):$("",!0)],10,se))),128))])])):$("",!0),e.value?(h(),w("div",{key:1,class:"backdrop",onClick:i[2]||(i[2]=m=>e.value=!1)})):$("",!0)]))}}),ve=O(re,[["__scopeId","data-v-2eb9e917"]]),le={class:"modal-header"},ie={class:"header-content"},ce=["title"],ue={class:"modal-content"},de={class:"modal-footer"},pe=P({name:"ModalDialog",__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},statusIcon:{type:String,default:""},statusIconClass:{type:String,default:""},statusIconTitle:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(l,{emit:t}){const e=l,s=t,c=a=>{a.target===a.currentTarget&&(a.stopPropagation(),a.preventDefault())},g=a=>{if(!a||!(a instanceof HTMLElement))return!1;const n=a.tagName.toLowerCase(),p=a.isContentEditable;return n==="input"||n==="textarea"||n==="select"||p},f=a=>{e.modelValue&&(g(a.target)||(a.key==="Escape"?s("update:modelValue",!1):a.key==="Enter"&&!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&s("confirm")))};return M(()=>{document.addEventListener("keydown",f)}),S(()=>{document.removeEventListener("keydown",f)}),(a,n)=>(h(),I(N,{to:"body"},[T(R,{name:"modal"},{default:F(()=>[l.modelValue?(h(),w("div",{key:0,class:"modal-overlay",onClick:c},[r("div",{class:"modal-container",onClick:n[3]||(n[3]=L(()=>{},["stop"]))},[r("div",le,[r("div",ie,[r("h3",null,v(l.title),1),l.statusIcon?(h(),w("div",{key:0,class:j(["status-icon",l.statusIconClass]),title:l.statusIconTitle},[T(y(k),{icon:l.statusIcon,width:"16"},null,8,["icon"])],10,ce)):$("",!0)]),r("button",{class:"close-btn",onClick:n[0]||(n[0]=p=>a.$emit("update:modelValue",!1))},[T(y(k),{icon:"carbon:close"})])]),r("div",ue,[V(a.$slots,"default",{},void 0,!0)]),r("div",de,[V(a.$slots,"footer",{},()=>[r("button",{class:"cancel-btn",onClick:n[1]||(n[1]=p=>a.$emit("update:modelValue",!1))},v(a.$t("common.cancel")),1),r("button",{class:"confirm-btn",onClick:n[2]||(n[2]=p=>a.$emit("confirm"))},v(a.$t("common.confirm")),1)],!0)])])])):$("",!0)]),_:3})]))}}),ge=O(pe,[["__scopeId","data-v-8607d649"]]);function we(){return{handleImport:async(t,e={})=>{const s=t.target,c=s.files?.[0];if(!c)return;const{showConfirm:g=!1,confirmMessage:f,onSuccess:a,onError:n,onReload:p,onSingleTemplateImported:d}=e;try{const o=await c.text(),i=JSON.parse(o);if(!Array.isArray(i)){const b="Invalid format: expected an array of plan templates";if(s.value="",n)n(b);else throw new Error(b);return}if(g&&f&&!confirm(f)){s.value="";return}const m=await X.importPlanTemplates(i);if(m.success){if(a&&await a(m,i),p&&await p(),d&&m.successCount===1&&i.length===1){const b=i[0];b.planTemplateId&&await d(b)}}else n?n("Import failed"):u.error("Import failed")}catch(o){u.error("Failed to import plan templates:",o);const i=o instanceof Error?o.message:"Failed to import plan templates";n&&n(i)}finally{s.value=""}}}}function ye(){const l=U({show:!1,text:"",type:"success"});return{toast:l,showToast:(e,s="success")=>{u.debug(`Showing toast: ${e}, Type: ${s}`),l.text=e,l.type=s,l.show=!0;const c=s==="error"?5e3:3e3;u.debug(`Toast will be automatically hidden after ${c}ms`),setTimeout(()=>{l.show=!1,u.debug("Toast hidden")},c)}}}export{ve as L,ge as M,X as P,we as a,ye as b,fe as u};
//# sourceMappingURL=useToast-BvHUHQPN.js.map
